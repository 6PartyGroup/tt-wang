<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace 命名空间 可以自定义 但是不能与其他的namespace重复 -->
<mapper namespace="com.sinister.dao.GZUserDao">

	<!-- type属性-实体类 -->
	<!-- <resultMap type="com.sinister.entity.AllJobs" id="AllJobsResult"> 映射字段 
		数据库—实体类 column数据表字段 ，property 实体类的属性 <id column="a_id" jdbcType="INTEGER" 
		property="aId" /> <result column="a_name" jdbcType="VARCHAR" property="aName" 
		/> </resultMap> -->

	<!-- 招聘信息表 -->
	<resultMap type="com.sinister.entity.Crecruit" id="CrecruitResult">
		<!-- 映射字段 数据库—实体类 -->
		<!-- column数据表字段 ，property 实体类的属性 -->
		<id column="c_rid" jdbcType="INTEGER" property="rid" />
		<result column="a_id" jdbcType="INTEGER" property="aid" />
		<result column="c_duty" jdbcType="VARCHAR" property="duty" />
		<result column="c_requirement" jdbcType="VARCHAR" property="requirement" />
		<result column="c_money" jdbcType="VARCHAR" property="money" />
		<result column="c_workyear" jdbcType="VARCHAR" property="workear" />
		<result column="c_number" jdbcType="VARCHAR" property="number" />
		<result column="c_edu" jdbcType="VARCHAR" property="edu" />
		<result column="c_address" jdbcType="VARCHAR" property="address" />
		<result column="c_mid" jdbcType="INTEGER" property="mid" />
		<!-- 公司 -->
		<association property="cmessage" javaType="com.sinister.entity.Cmessage"
			resultMap="CmessageResult" />
		<!-- 职位 -->
		<association property="alljobs" javaType="com.sinister.entity.AllJobs"
			resultMap="AllJobsResult" />
	</resultMap>

	<!-- 公司表 -->
	<resultMap type="com.sinister.entity.Cmessage" id="CmessageResult">
		<!-- 映射字段 数据库—实体类 column数据表字段 ，property 实体类的属性 -->
		<id column="c_mid" jdbcType="INTEGER" property="mid" />
		<result column="c_name" jdbcType="VARCHAR" property="name" />
	</resultMap>

	<!-- 职位表 -->
	<resultMap type="com.sinister.entity.AllJobs" id="AllJobsResult">
		<!-- 映射字段 数据库—实体类 column数据表字段 ，property 实体类的属性 -->
		<id column="a_id" jdbcType="INTEGER" property="aId" />
		<result column="a_name" jdbcType="VARCHAR" property="aName" />
	</resultMap>

	<!-- 三表联查 -->
	<select id="findjcr" parameterType="com.sinister.entity.Crecruit" resultMap="CrecruitResult">
		select c1.*,c2.c_name as c_name,c3.a_name as a_name from c_recruit c1
		left JOIN c_message c2 on c1.c_mid=c2.c_mid
		left JOIN alljobs c3 on c1.a_id=c3.a_id
		WHERE c2.c_name=#{name} or c3.a_name=#{aName}
	</select>

	<!-- 根据公司信息表是次表 招聘信息是主表 查找招聘信息 两张表查询 -->
	<select id="findGZjob" parameterType="com.sinister.entity.Crecruit"
		resultMap="CrecruitResult">
		select c1.*,c2.c_name as c_name from c_recruit c1
		left JOIN
		c_message
		c2 on c1.c_mid=c2.c_mid
		WHERE c2.c_name=#{name}
	</select>



	<!-- 单表查询 查询招聘信息表 -->
	<select id="findcrecruit" parameterType="com.sinister.entity.Crecruit"
		resultMap="CrecruitResult">
		select * from c_recruit where c_rid=#{rid}
	</select>




</mapper>